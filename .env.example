# SoulMatting Platform - Environment Configuration
# Author: Kim Hsiao
# Version: 1.0.0
# Created: 2024-01-20
# Last Updated: 2024-01-20
# Copy this file to .env and fill in your actual values
# DO NOT commit .env files to version control

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
NODE_ENV=development
APP_NAME=SoulMatting
APP_VERSION=1.0.0
APP_ENV=development
LOG_LEVEL=debug

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL
DATABASE_URL=postgres://postgres:postgres@localhost:5432/soulmatting_dev
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=soulmatting_dev
DATABASE_USER=postgres
DATABASE_PASSWORD=postgres
DATABASE_SSL=false
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# Redis
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# =============================================================================
# SUPABASE CONFIGURATION
# =============================================================================
SUPABASE_URL=http://localhost:8000
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU

# GoTrue (Auth)
GOTRUE_API_HOST=0.0.0.0
GOTRUE_API_PORT=9999
GOTRUE_DB_DRIVER=postgres
GOTRUE_SITE_URL=http://localhost:3000
GOTRUE_DISABLE_SIGNUP=false
GOTRUE_JWT_SECRET=your-super-secret-jwt-token-with-at-least-32-characters-long
GOTRUE_EXTERNAL_EMAIL_ENABLED=true
GOTRUE_MAILER_AUTOCONFIRM=true
GOTRUE_SMTP_ADMIN_EMAIL=admin@soulmatting.com
GOTRUE_SMTP_HOST=localhost
GOTRUE_SMTP_PORT=1025
GOTRUE_SMTP_USER=
GOTRUE_SMTP_PASS=
GOTRUE_SMTP_SENDER_NAME=SoulMatting

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================
# MinIO/S3
STORAGE_BACKEND=s3
GLOBAL_S3_BUCKET=soulmatting-dev
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin123
GLOBAL_S3_ENDPOINT=http://localhost:9000
GLOBAL_S3_PROTOCOL=http
GLOBAL_S3_FORCE_PATH_STYLE=true
FILE_SIZE_LIMIT=104857600

# =============================================================================
# API CONFIGURATION
# =============================================================================
# Frontend
VITE_SUPABASE_URL=http://localhost:8000
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
VITE_API_URL=http://localhost:8000
VITE_STORAGE_URL=http://localhost:5000
VITE_REALTIME_URL=ws://localhost:4000
VITE_APP_ENV=development

# API Gateway
KONG_DATABASE=off
KONG_DECLARATIVE_CONFIG=/kong/declarative/kong.yml
KONG_PROXY_ACCESS_LOG=/dev/stdout
KONG_ADMIN_ACCESS_LOG=/dev/stdout
KONG_PROXY_ERROR_LOG=/dev/stderr
KONG_ADMIN_ERROR_LOG=/dev/stderr
KONG_ADMIN_LISTEN=0.0.0.0:8001

# =============================================================================
# MICROSERVICES CONFIGURATION
# =============================================================================
# Auth Service
AUTH_SERVICE_PORT=3002
AUTH_SERVICE_JWT_SECRET=your-super-secret-jwt-token-with-at-least-32-characters-long
AUTH_SERVICE_JWT_EXPIRES_IN=7d
AUTH_SERVICE_REFRESH_TOKEN_EXPIRES_IN=30d

# User Service
USER_SERVICE_PORT=3003

# Match Service
MATCH_SERVICE_PORT=3004

# Communication Service
COMMUNICATION_SERVICE_PORT=3005

# Media Service
MEDIA_SERVICE_PORT=3006

# Notification Service
NOTIFICATION_SERVICE_PORT=3007

# Search Service
SEARCH_SERVICE_PORT=3008

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
# Email Service (Development - MailHog)
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USER=
SMTP_PASS=
SMTP_FROM_EMAIL=noreply@soulmatting.com
SMTP_FROM_NAME=SoulMatting

# OAuth Providers (Replace with your actual credentials)
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
FACEBOOK_APP_ID=your-facebook-app-id
FACEBOOK_APP_SECRET=your-facebook-app-secret
APPLE_CLIENT_ID=your-apple-client-id
APPLE_TEAM_ID=your-apple-team-id
APPLE_KEY_ID=your-apple-key-id
APPLE_PRIVATE_KEY=your-apple-private-key

# Push Notifications
FCM_SERVER_KEY=your-fcm-server-key
APNS_KEY_ID=your-apns-key-id
APNS_TEAM_ID=your-apns-team-id
APNS_PRIVATE_KEY=your-apns-private-key

# Analytics
GOOGLE_ANALYTICS_ID=your-google-analytics-id
MIXPANEL_TOKEN=your-mixpanel-token

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# JWT
JWT_SECRET=your-super-secret-jwt-token-with-at-least-32-characters-long
JWT_EXPIRES_IN=7d
REFRESH_TOKEN_SECRET=your-super-secret-refresh-token-with-at-least-32-characters-long
REFRESH_TOKEN_EXPIRES_IN=30d

# Encryption
ENCRYPTION_KEY=your-32-character-encryption-key-here
HASH_SALT_ROUNDS=12

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# CORS
CORS_ORIGIN=http://localhost:3000
CORS_CREDENTIALS=true

# =============================================================================
# MONITORING & LOGGING
# =============================================================================
# Logging
LOG_FORMAT=combined
LOG_FILE_PATH=./logs/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5

# Health Checks
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# Metrics
METRICS_ENABLED=true
METRICS_PORT=9090

# =============================================================================
# DEVELOPMENT TOOLS
# =============================================================================
# Hot Reload
WATCH_FILES=true
WATCH_EXTENSIONS=.ts,.js,.json

# Debug
DEBUG=soulmatting:*
DEBUG_COLORS=true

# Testing
TEST_DATABASE_URL=postgres://postgres:postgres@localhost:5432/soulmatting_test
TEST_REDIS_URL=redis://localhost:6379/1

# =============================================================================
# PRODUCTION OVERRIDES (Only for production deployment)
# =============================================================================
# Uncomment and configure these for production
# NODE_ENV=production
# LOG_LEVEL=info
# DATABASE_SSL=true
# GOTRUE_MAILER_AUTOCONFIRM=false
# GOTRUE_DISABLE_SIGNUP=true
# FILE_SIZE_LIMIT=52428800
# CORS_ORIGIN=https://yourdomain.com
JWT_REFRESH_SECRET=your_super_secret_refresh_key_change_this_in_production
JWT_REFRESH_EXPIRES_IN=30d

# Session Configuration
SESSION_SECRET=your_super_secret_session_key_change_this_in_production
SESSION_MAX_AGE=86400000

# Password Hashing
BCRYPT_ROUNDS=12

# =============================================================================
# OAuth Providers
# =============================================================================

# Google OAuth
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_CALLBACK_URL=http://localhost:3000/auth/google/callback

# Facebook OAuth
FACEBOOK_APP_ID=your_facebook_app_id
FACEBOOK_APP_SECRET=your_facebook_app_secret
FACEBOOK_CALLBACK_URL=http://localhost:3000/auth/facebook/callback

# Apple OAuth
APPLE_CLIENT_ID=your_apple_client_id
APPLE_TEAM_ID=your_apple_team_id
APPLE_KEY_ID=your_apple_key_id
APPLE_PRIVATE_KEY_PATH=./certs/apple-private-key.p8
APPLE_CALLBACK_URL=http://localhost:3000/auth/apple/callback

# =============================================================================
# Message Queue (RabbitMQ)
# =============================================================================
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USER=soulmatting_user
RABBITMQ_PASSWORD=your_rabbitmq_password
RABBITMQ_VHOST=/
RABBITMQ_URL=amqp://soulmatting_user:your_rabbitmq_password@localhost:5672/

# =============================================================================
# Search Engine
# =============================================================================

# Meilisearch
MEILISEARCH_HOST=localhost
MEILISEARCH_PORT=7700
MEILISEARCH_API_KEY=your_meilisearch_master_key
MEILISEARCH_URL=http://localhost:7700

# Typesense (Alternative)
TYPESENSE_HOST=localhost
TYPESENSE_PORT=8108
TYPESENSE_API_KEY=your_typesense_api_key
TYPESENSE_URL=http://localhost:8108

# =============================================================================
# File Storage
# =============================================================================

# Local Storage
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760

# AWS S3 (Production)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-west-2
AWS_S3_BUCKET=soulmatting-uploads

# Cloudinary (Alternative)
CLOUDINARY_CLOUD_NAME=your_cloudinary_cloud_name
CLOUDINARY_API_KEY=your_cloudinary_api_key
CLOUDINARY_API_SECRET=your_cloudinary_api_secret

# =============================================================================
# Email Service
# =============================================================================

# SMTP Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_email_password
SMTP_FROM_NAME=SoulMatting
SMTP_FROM_EMAIL=noreply@soulmatting.com

# SendGrid (Alternative)
SENDGRID_API_KEY=your_sendgrid_api_key
SENDGRID_FROM_EMAIL=noreply@soulmatting.com

# =============================================================================
# Real-time Communication
# =============================================================================

# Socket.io
SOCKET_IO_PORT=3001
SOCKET_IO_CORS_ORIGIN=http://localhost:3000

# WebRTC
WEBRTC_STUN_SERVER=stun:stun.l.google.com:19302
WEBRTC_TURN_SERVER=turn:your-turn-server.com:3478
WEBRTC_TURN_USERNAME=your_turn_username
WEBRTC_TURN_PASSWORD=your_turn_password

# =============================================================================
# External APIs
# =============================================================================

# Google Maps API
GOOGLE_MAPS_API_KEY=your_google_maps_api_key

# Geolocation Service
GEOLOCATION_API_KEY=your_geolocation_api_key

# Content Moderation
MODERATION_API_KEY=your_moderation_api_key

# =============================================================================
# Monitoring & Logging
# =============================================================================

# Application Logging
LOG_LEVEL=info
LOG_FORMAT=combined
LOG_FILE_PATH=./logs/app.log

# Sentry (Error Tracking)
SENTRY_DSN=your_sentry_dsn
SENTRY_ENVIRONMENT=development

# New Relic (Performance Monitoring)
NEW_RELIC_LICENSE_KEY=your_new_relic_license_key
NEW_RELIC_APP_NAME=SoulMatting

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# CORS Configuration
# =============================================================================
CORS_ORIGIN=http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=true

# =============================================================================
# Development Tools
# =============================================================================

# API Documentation
SWAGGER_TITLE=SoulMatting API
SWAGGER_DESCRIPTION=SoulMatting Platform API Documentation
SWAGGER_VERSION=1.0.0
SWAGGER_PATH=api/docs

# Development Mode
DEV_MODE=true
DEBUG_MODE=true

# =============================================================================
# Testing Configuration
# =============================================================================

# Test Database
TEST_DATABASE_URL=postgresql://${TEST_DB_USER:-test_user}:${TEST_DB_PASSWORD:-test_password}@localhost:5432/${TEST_DB_NAME:-soulmatting_test}
TEST_MONGO_URL=mongodb://${TEST_MONGO_USER:-test_user}:${TEST_MONGO_PASSWORD:-test_password}@localhost:27017/${TEST_MONGO_DB:-soulmatting_test}
TEST_REDIS_URL=redis://:${TEST_REDIS_PASSWORD:-test_password}@localhost:6379/1

# =============================================================================
# Production Specific (Only for production environment)
# =============================================================================

# SSL Configuration
SSL_CERT_PATH=./certs/cert.pem
SSL_KEY_PATH=./certs/key.pem

# Security Headers
HSTS_MAX_AGE=31536000
CSP_POLICY="default-src 'self'"

# =============================================================================
# Notes
# =============================================================================
# 1. Replace all 'your_*' placeholders with actual values
# 2. Generate strong, unique secrets for production
# 3. Use environment-specific values for different deployments
# 4. Never commit actual .env files to version control
# 5. Regularly rotate secrets and API keys
# 6. Use a secret management service in production